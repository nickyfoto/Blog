---
layout: post
title:  "Nignx"
date:   2018-09-10
author: "Huang Qiang"
tags: [nignx]
comments: true
---

command

```
apt-get install nginx
nginx -v
systemctl status nginx
systemctl start nginx
systemctl stop nginx
systemctl reload nginx

nginx -t # check without reloading the service
nginx -T # check and print all configuration files to screen


service nginx restart

```

Configuration

```
/etc/nginx
├── conf.d
├── fastcgi.conf
├── fastcgi_params
├── koi-utf
├── koi-win
├── mime.types
├── modules-available
├── modules-enabled
│   ├── 50-mod-http-geoip.conf -> /usr/share/nginx/modules-available/mod-http-geoip.conf
│   ├── 50-mod-http-image-filter.conf -> /usr/share/nginx/modules-available/mod-http-image-filter.conf
│   ├── 50-mod-http-xslt-filter.conf -> /usr/share/nginx/modules-available/mod-http-xslt-filter.conf
│   ├── 50-mod-mail.conf -> /usr/share/nginx/modules-available/mod-mail.conf
│   └── 50-mod-stream.conf -> /usr/share/nginx/modules-available/mod-stream.conf
├── nginx.conf
├── proxy_params
├── scgi_params
├── sites-available
│   └── default
├── sites-enabled
│   └── default -> /etc/nginx/sites-available/default
├── snippets
│   ├── fastcgi-php.conf
│   └── snakeoil.conf
├── uwsgi_params
└── win-utf
```

log

```
/var/log/nginx
├── access.log
└── error.log
```

site

```
/var/www
└── html
    └── index.nginx-debian.html
```

```
# show files in a folder as list
location /images {
	autoindex on;
}

# error page setting
location / {
    # First attempt to serve request as file, then
    # as directory, then fall back to displaying a 404.
    try_files $uri $uri/ =404;
}

error_page 404 /404.html;
location = /404.html {
	internal;
}


# produce a fake 500 error
location = /500 {
	fastcgi_pass unix:/this/will/fail;
}

error_page 500 502 503 504 /50x.html;
location = /50x.html {
	internal;
}

```

verify open ports

```
sudo lsof -P -n -i :80 -i :443 | grep LISTEN
netstate -plan | grep nginx
```


https://www.nginx.com/resources/wiki/start/

https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/

http://nginx.org/en/docs/http/request_processing.html

http://nginx.org/en/docs/http/ngx_http_core_module.html#location

[Unix domain socket](https://en.wikipedia.org/wiki/Unix_domain_socket)

```
find /some/dir/ -type f -exec chmod 644 {} \;
find /some/dir/ -type d -exec chmod 644 {} \;
```